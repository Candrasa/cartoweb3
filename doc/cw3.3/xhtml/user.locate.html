<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>19. Locate Plugin</title>
    <link rel="stylesheet" href="document.css" type="text/css" />
    <meta name="generator" content="Tiny DocBook - 1.6.16" />
  </head>
  <body>
    <div id="prev_next">
      <p id="prev">
        <a accesskey="p" href="user.accounting.html">
       &lt; Accounting</a>
      </p>
      <p id="next">
        <a accesskey="n" href="user.wms.html">WMS Browser &gt;
     </a>
      </p>
    </div>
    <div id="navtoc">
      <div id="nav">
        <ul>
          <li>
            <a accesskey="h" href="index.html">CartoWeb Documentation</a>
          </li>
          <li>
            <a accesskey="u" href="cartoweb.user.html">User Manual</a>
          </li>
        </ul>
      </div>
      <div id="toc">
        <p>Table of Contents</p>
        <ul>
          <li>
            <span class="sect1">
              <a href="user.locate.html#user.locate.intro">19.1. Introduction</a>
            </span>
          </li>
          <li>
            <span class="sect1">
              <a href="user.locate.html#user.locate.activation">19.2. Activation</a>
            </span>
          </li>
          <li>
            <span class="sect1">
              <a href="user.locate.html#user.locate.configuration">19.3. Configuration</a>
            </span>
          </li>
        </ul>
      </div>
    </div>
    <div id="title">
      <h2 class="title"><a id="user.locate"></a>19. <a id="id2600835" class="indexterm"></a>Locate Plugin</h2>
    </div>
    <div id="content">
      <div class="chapter" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div></div>
          </div>
        </div>
        <div class="sect1" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="user.locate.intro"></a>19.1. Introduction</h2>
              </div>
            </div>
          </div>
          <p>
    The locate plugin deals with autocompletion of input fields used to recenter on a feature on the map. It is based on AJAX requests.
   </p>
          <p>
    When a few characters have been typed in the dedicated input field, an AJAX request
    is processed on the database defined by its DSN. The first
    results beginning with these characters are displayed in a drop down list.
   </p>
          <p>When a result is clicked, the map is recentered on it.</p>
          <p>
    The JavaScript part of this plugin is based on the 
    <a href="http://script.aculo.us/">script.aculo.us</a> Autocompleter.
   </p>
        </div>
        <div class="sect1" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="user.locate.activation"></a>19.2. Activation</h2>
              </div>
            </div>
          </div>
          <p>
      The plugin needs obviously to be activated using the 
      <code class="filename">client_conf/client.ini</code>
      <em class="parameter"><code>loadPlugins</code></em> parameter. For instance: 
      </p>
          <pre class="programlisting">loadPlugins = auth, exportPdf, views, locate</pre>
          <p>
    </p>
          <p>To enable the plugin, you also need to add required parts in the
      <code class="filename">cartoclient.tpl</code> template.
      In the &lt;head&gt; element:
      </p>
          <pre class="screen">{if $locate_active|default:''}&lt;link rel="stylesheet" type="text/css" href="{r type=css plugin=locate}locate.css{/r}" /&gt;{/if}
      ...
{if $locate_active|default:''}&lt;script type="text/javascript" src="{r type=js}prototype.js{/r}"&gt;&lt;/script&gt;{/if}</pre>
          <p>
      And in the &lt;body&gt; of the document (for example in the navigation folder):
      </p>
          <pre class="screen">
      {if $locate_active|default:''}
           {$locate_form}
      {/if}</pre>
          <p>
      </p>
          <div class="tip">
            <h3 class="title">Tip</h3>
            <p>Warning: make sure that <em class="parameter"><code>id_recenter</code></em> is active!</p>
          </div>
          <p>
    </p>
        </div>
        <div class="sect1" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="user.locate.configuration"></a>19.3. Configuration</h2>
              </div>
            </div>
          </div>
          <p>
      </p>
          <div class="itemizedlist">
            <ul>
              <li> 
          <em class="parameter"><code>locate.#.id</code></em> (# = 0, 1, 2, ...): id of the layer in layers.ini to recenter on.
        </li>
              <li> 
          <em class="parameter"><code>locate.#.label</code></em> (# = 0, 1, 2, ...): label of the locate input;
          Note that if you use the same label as in the layers.ini translations
          will operate.
        </li>
              <li> 
          <em class="parameter"><code>locate.#.sql</code></em> (# = 0, 1, 2, ...): SQL statement for the AJAX request to the database. It must return two fields:
          <div class="itemizedlist"><ul><li>an identifier : the value of the <em class="parameter"><code>id_attribute_string</code></em> field of the layer, in order to be able to recenter on the feature,</li><li>a label : a name for the feature to recenter on.</li></ul></div>
        </li>
            </ul>
          </div>
          <p>
    </p>
        </div>
      </div>
      <div id="w3c">
        <a href="http://validator.w3.org/check/referer">
          <img src="image/xhtml.png" width="88" height="31" alt="valid xhtml 1.0" />
        </a>
        <a href="http://jigsaw.w3.org/css-validator/">
          <img src="image/css.png" width="88" height="31" alt="valid css" />
        </a>
      </div>
    </div>
  </body>
</html>
