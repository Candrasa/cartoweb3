MAP
  NAME "demoRouting"
  EXTENT 142776 4757216 1083857 5409261
  IMAGETYPE PNG
  IMAGECOLOR 255 255 255
  STATUS ON
  UNITS METERS
  FONTSET "fonts.txt"
  SYMBOLSET "symbols.txt"
  SHAPEPATH "data"

  OUTPUTFORMAT
    NAME png
    DRIVER "GD/PNG"
    MIMETYPE "image/png"
    IMAGEMODE PC256
    EXTENSION "png"
    FORMATOPTION "INTERLACE=OFF"
    TRANSPARENT ON
  END
 
  OUTPUTFORMAT
    NAME jpeg
    DRIVER "GD/JPEG"
    MIMETYPE "image/jpeg"
    IMAGEMODE RGB
    EXTENSION "jpg"
    FORMATOPTION "INTERLACE=OFF"
    FORMATOPTION "QUALITY=80"
  END
 
  REFERENCE
    IMAGE images/keymap.png
    EXTENT 142776 4757331 1083562 5409260
    STATUS ON
    COLOR -1 -1 -1
    OUTLINECOLOR 180 60 60
    SIZE 201 140
  END

  SCALEBAR
    POSTLABELCACHE TRUE
    STYLE 0
    UNITS kilometers
    SIZE 350 3
    TRANSPARENT TRUE
    COLOR 77 77 88
    IMAGECOLOR 242 255 195
    BACKGROUNDCOLOR 222 222 222
    LABEL
      TYPE BITMAP
      SIZE SMALL
      COLOR 0 0 0
      POSITION UR
      BUFFER 10
    END
  END

  LEGEND
    KEYSIZE 20 15
  END

  LAYER
    NAME "raster"
    TYPE RASTER
    DATA "gtopo30_shade.tif"
    METADATA
       "force_imagetype" "jpeg"
    END
  END


  LAYER
    NAME "contour"
    TYPE LINE
    DATA "contourl"

    METADATA
      "exported_values" "security_view,security_edit"
      #"security_view" "demo"
    END
    MAXSCALE 601000

    CLASS
      NAME "contour"
      STYLE
        COLOR 255 165 96 
      END
    END
  END
  
  
  LAYER
    NAME "district"
    TYPE POLYGON
    DATA "polbnda"

    METADATA
        "id_attribute_string" "OGC_FID|string"
        "query_returned_attributes" "NAM" 
    END

    CLASS
      COLOR 80 160 74
    END
    
    CLASS
      STYLE
        OUTLINECOLOR 133 155 133
        SYMBOL 'circle' 
        SIZE 1 
      END
    END
  END

  LAYER
    NAME "iceland"
    TYPE POLYGON
    DATA "landicea"
    TRANSPARENCY 50

    TEMPLATE "ttt"
    METADATA
        "id_attribute_string" "OGC_FID|string"
        "query_returned_attributes" "AREA" 
    END

    CLASS
      NAME "iceland"
      STYLE
       COLOR 220 220 110
       OUTLINECOLOR 180 180 0
      END
    END
  END

  LAYER
    NAME "iceland_hilight"
    TYPE POLYGON
    DATA "landicea"
    TRANSPARENCY 50
    CLASS
      STYLE
        COLOR 255 0 104
      END
    END
  END


  LAYER
    NAME "sea"
    TYPE POLYGON
    DATA "oceansea"
    TRANSPARENCY 70
    CLASS
      STYLE
        COLOR 180 180 240
        OUTLINECOLOR 0 0 180
      END
    END
  END


  LAYER
    NAME "lake"
    TYPE POLYGON
    DATA "inwatera"
    TRANSPARENCY 70

    METADATA
        "id_attribute_string" "OGC_FID|string"
        "query_returned_attributes" "AREA" 
    END
    
    TEMPLATE "ttt"
    CLASS
      NAME "lake"
      STYLE
        COLOR 180 180 240
        OUTLINECOLOR 0 0 180
      END
    END
  END


  LAYER
    NAME "river"
    TYPE LINE
    DATA "watrcrsl"
    #MAXSCALE 3500000
    
    CLASS
      NAME "river"
      STYLE
        SYMBOL "circle"
        #SIZE 1
        COLOR 0 0 180
      END
    END
  END


  LAYER
    NAME "railway"
    TYPE LINE
    DATA "railrdl"

    MAXSCALE 1001000

    METADATA
      "exported_values" "security_view,security_edit"
      "security_view" "demo"
    END

    CLASS
      NAME "railway"
      EXPRESSION ([EXS] = 28)
      STYLE
        SYMBOL 'line' 
        SIZE 2
       COLOR 0 0 0
      END
      STYLE
        SYMBOL '|'
        SIZE 10
        COLOR 0 0 0
      END
    END
  END

  LAYER
    NAME "road1"
    TYPE LINE
    DATA "roadl"
    
    #vue generale
    CLASS
      NAME "routes"
      MINSCALE 750001
      STYLE
          COLOR 0 0 0
      END
    END
  END
    
  LAYER
    NAME "road2"
    TYPE LINE
    DATA "roadl"
    SYMBOLSCALE 250000
    
    CLASS  
      NAME "route nationale"
      MAXSCALE 750000
      EXPRESSION ([EXS] = 28 and [MED] = 2)
      STYLE  
         SYMBOL 'circle'
         COLOR 0 0 0
         SIZE 5
      END
      STYLE
        SYMBOL 'circle'
        COLOR 255 0 0
        SIZE 3
      END 
    END
    
    CLASS
      NAME "autoroute"
      MAXSCALE 750000
      EXPRESSION ([EXS] = 28 and [MED] = 1)
      STYLE  
         SYMBOL 'circle'
         COLOR 255 0 0
         SIZE 7
      END
      STYLE
         SYMBOL 'circle'
         COLOR 255 255 0
         SIZE 2
      END 
    END
    
    CLASS
      # route nationale
      MAXSCALE 750000
      EXPRESSION ([EXS] = 55)
      STYLE  
         SYMBOL 'circle'
         COLOR 0 0 0
         SIZE 5
      END
      STYLE
         SYMBOL 'circle'
         COLOR 255 0 0
         SIZE 3
      END 
    END
    
    CLASS
      # autoroute
      MAXSCALE 750000
      EXPRESSION ([EXS] = 5)
      STYLE  
         SYMBOL 'circle'
         COLOR 255 0 0
         SIZE 7
      END
      STYLE
        SYMBOL 'circle'
        COLOR 255 255 0
        SIZE 2
      END  
    END
  END


  LAYER
    NAME "mountain"
    TYPE POINT
    DATA "elevp"

    METADATA
        "id_attribute_string" "OGC_FID|string"
        "query_returned_attributes" "ZV2" 
    END

    TRANSPARENCY 90

    CLASS
      TEMPLATE "ttt"
      NAME "> 3500m"
      EXPRESSION ([ZV2]>3500)
      STYLE
        COLOR 80 80 90
        SYMBOL "triangle"
        SIZE 12
      END
    END

    CLASS
      TEMPLATE "ttt"
      NAME "> 2500m"
      EXPRESSION ([ZV2]>2500 AND [ZV2]<3500)
      STYLE
        COLOR 80 80 90
        SYMBOL "triangle"
        SIZE 9
      END
    END
  END

  LAYER
    NAME "mountain_hilight"
    TYPE POINT
    DATA "elevp"
    TRANSPARENCY 50

    CLASS
      STYLE
        COLOR 255 0 104
        SYMBOL "triangle"
        SIZE 14
      END
    END
  END
  
  
  LAYER
    NAME "agglo"
    TYPE POLYGON
    DATA "builtupa"

    METADATA
        "id_attribute_string" "OGC_FID|string"
        "query_returned_attributes" "NAM" 
    END

    LABELITEM "NAM"

    MAXSCALE 2001000

    CLASS
      NAME "agglo"
      TEMPLATE "ttt"
      STYLE
        SIZE 5
        SYMBOL "fill45"
        COLOR 136 33 33
        OUTLINECOLOR 64 12 12
      END
      LABEL
        MINFEATURESIZE 12
        TYPE TRUETYPE
        FONT "Vera"
        SIZE 8
        COLOR 0 0 0
        POSITION cc
        BACKGROUNDCOLOR 245 235 235
        BACKGROUNDSHADOWCOLOR 55 55 55
        BACKGROUNDSHADOWSIZE 1 1
        WRAP " "
      END
    END
  END


  

  LAYER
    NAME "airport"
    TYPE POINT
    DATA "aerofacp"

    METADATA
        "id_attribute_string" "OGC_FID|string"
        "query_returned_attributes" "NAM"
    END
    LABELITEM "NAM"

    MAXSCALE 751000
    TEMPLATE "ttt"

    CLASS
      NAME "airport"
      STYLE
        SYMBOL "airport"
        COLOR 0 0 0
        OUTLINECOLOR 0 0 0
      END
      LABEL
        TYPE TRUETYPE
        FONT "Vera"
        SIZE 7
        COLOR 0 0 120
        POSITION lc
        BACKGROUNDCOLOR 210 210 255
        BACKGROUNDSHADOWCOLOR 55 55 55
        BACKGROUNDSHADOWSIZE 1 1
      END
    END
  END


  LAYER
    NAME "town"
    TYPE POINT
    DATA "mispopp"

    METADATA
        "id_attribute_string" "OGC_FID|string"
        "query_returned_attributes" "TXT" 
    END

    MAXSCALE 1450000
    LABELITEM "TXT"
    LABELMAXSCALE 300000

    CLASS
      EXPRESSION ("[TXT]" ne "UNK" )
      NAME "town"
      TEMPLATE "ttt"
      STYLE
        COLOR 0 0 0
        SYMBOL 'circle'
        SIZE 5
      END
      STYLE
        COLOR 255 255 255
        SYMBOL 'circle'
        SIZE 3
      END
      
      #STYLE
       # COLOR 180 66 66
        #SYMBOL "circle"
        #SIZE 11
      #END
      #STYLE
       # COLOR 250 250 250
       # SYMBOL "circle"
       # SIZE 7
      #END
      LABEL
        TYPE TRUETYPE
        FONT "Vera"
        SIZE 6
        COLOR 0 0 0
        POSITION lc
        BACKGROUNDCOLOR 245 235 235
        BACKGROUNDSHADOWCOLOR 55 55 55
        BACKGROUNDSHADOWSIZE 1 1
        WRAP " "
      END
    END
  END
  
  
  #########
  # ROUTE #
  #########
  LAYER
    NAME "graph"
    TYPE LINE
    TRANSPARENCY 80
    CONNECTIONTYPE postgis
        CONNECTION "user=www-data host=localhost dbname=Itineraire"
        #DATA "the_geom from routing_results"
        DATA "the_geom from (SELECT the_geom from routing_results) as foo using unique gid using srid=-1"
    TEMPLATE "t"
    CLASS
      NAME "0"
      STYLE
        SYMBOL "circle"
        SIZE 10
        COLOR 90 27 191
      END
    END
  END
  
  
  ###########
  # OUTLINE #
  ###########
  
  LAYER
    NAME "cartoweb_point_outline"
    TYPE POINT
    CLASS
      STYLE
        OUTLINECOLOR 255 102 0
        SYMBOL "circle"
        SIZE 15
      END
      STYLE
        SYMBOL "circle"
        OUTLINECOLOR 255 102 0
        SIZE 12
      END
      LABEL
        TYPE TRUETYPE
        FONT "Vera"
        SIZE 11
        COLOR 120 20 20
        POSITION lc
      END
    END
  END


  LAYER
    NAME "cartoweb_line_outline"
    TYPE LINE
    CLASS
      STYLE
        COLOR 255 102 0
        SYMBOL "circle"
        SIZE 2
      END
      LABEL
        TYPE TRUETYPE
        FONT "Vera"
        SIZE 11
        COLOR 120 20 20 
        ANGLE auto
        POSITION uc
      END
    END
  END


  LAYER
    NAME "cartoweb_polygon_outline"
    TYPE POLYGON
    TRANSPARENCY 60
    CLASS
      STYLE
        COLOR 255 102 0
      END
      LABEL
        TYPE TRUETYPE
        FONT "Vera"
        SIZE 11
        COLOR 120 20 20
        POSITION cc
      END
    END
  END


  # Layer none is only there to let layers.ini none option available...
  LAYER
    NAME "none"
    TYPE POLYGON
  END

END
