<?xml version="1.0" encoding='ISO-8859-1'?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
  "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % cartoweb SYSTEM "../cartoweb.ent" >
  %cartoweb;
]>

<!-- $Id$ -->

<chapter id="user.config">
 <title>Configuration files</title>

 <sect1 id="user.config.intro"> 
  <title>Introduction</title>
  <para>
   Blabla Blabla Blabla Blabla Blabla Blabla Blabla 
   Blabla Blabla Blabla Blabla Blabla Blabla Blabla 
   Blabla Blabla Blabla Blabla Blabla Blabla Blabla 
  </para>
 </sect1>

 <sect1 id="user.config.client"> 
  <title>Client.ini</title>
  <para>
   CartoServer access configuration:
   <itemizedlist>
    <listitem>
     <para>
      urlProvider = Miniproxy|Symlink: The kind of URL generated
      for resources. See ResourceHandling
     </para>
    </listitem>
    <listitem>
     <para>
      cartoserverDirectAccess = true|false : toggles between SOAP 
      and direct modes. Direct access gives enhanced performances, 
      but is only available if CartoServer runs on the same server 
      as CartoClient.
     </para>
    </listitem>
    <listitem>
     <para>
      cartoserverUrl = "url" : complete url of the SOAP wsdl file 
      of the CartoServer. Only in SOAP mode.
     </para>
    </listitem>
   </itemizedlist>
  </para>
  <para>
   Mapfile configuration:
   <itemizedlist>
    <listitem>
     <para>
      mapId = string
     </para>
    </listitem>
    <listitem>
     <para>
      initialMapStateId = string
     </para>
    </listitem>
   </itemizedlist>
  </para>
  <para>
   Tools configuration:
   <itemizedlist>
    <listitem>
     <para>
      initialTool: indicates which tool is activated when in initial state.
      If not specified, the first tool in the toolbar is activated. 
      Possible values are : zoom_in, zoom_out, pan, query, 
      distance, surface.
     </para>
    </listitem>
   </itemizedlist>
  </para>
  <para>
   Project handling configuration:
   <itemizedlist>
    <listitem>
     <para>
      showProjectChooser = true|false : Shows a drop-down list for 
      selecting the active project.
     </para>
    </listitem>
    <listitem>
     <para>
      availableProjects = string : List of the project to show in 
      the drop down list. If not set, all projects found will be used.
     </para>
    </listitem>
   </itemizedlist>
  </para>
  <para>
   Plugins configuration:
   <itemizedlist>
    <listitem>
     <para>
      loadPlugins = list : list of client plugins to load in addition
      to the core plugins. Note that most client plugins also have a 
      corresponding server plugin that must be loaded on the server 
      side. See ServerDoc.
     </para>
    </listitem>
   </itemizedlist>
  </para>
  <para>
   Internationalization:
   <itemizedlist>
    <listitem>
     <para>
      I18nClass = I18nDummy|I18nGettext. See Cw3I18n for a description
      of the internationalization options and the corresponding 
      configurations.
     </para>
    </listitem>
    <listitem>
     <para>
      defaultLang = string : possible values are the usual locale codes 
      (en, fr, de ...)
     </para>
    </listitem>
   </itemizedlist>
  </para>
 </sect1>

 <sect1 id="user.config.server"> 
 <title>Server configuration files</title>

 <sect2 id="user.config.server.intro">
 <title>Introduction</title>
 <para> 
  The &cartoserver; has the ability to contains several different maps.
  These maps are represented by the mapserver mapfile, the &cartoweb; 
  configuration file for the map and each plugins configuration.
 </para>
 </sect2>

 <sect2 id="user.config.server.main_config">
  <title>Main server configuration file (Server.ini)</title>
  <para>
    TBD
  </para>
 </sect2>

 <sect2 id="user.config.server.maps_config">
  <title>Map configuaration files</title>
  <para>TBD</para>
  
  <sect3 id="user.config.server.maps_config.intro">
   <title>Initial Mapstates</title>  
   <para>
   Blabla Blabla Blabla Blabla Blabla Blabla Blabla 
   Blabla Blabla Blabla Blabla Blabla Blabla Blabla 
   Blabla Blabla Blabla Blabla Blabla Blabla Blabla 
   Blabla Blabla Blabla Blabla Blabla Blabla Blabla 
   </para>
  </sect3>

  <sect3 id="user.config.server.maps_config.initial">
   <title>Initial Mapstates</title>
   <para>
   <indexterm><primary>initial mapstate</primary></indexterm>
    Initial map states set the initial aspects of the layers selection 
    interface when starting using CartoClient : (un)folded nodes, selected 
    layers... Some of these properties are not modifiable in the layers 
    selection interface (hidden layers for instance) and thus stay 
    unchanged throughout the session
   </para>
   <para>
    Several initial map states can be created in <filename>myMap.ini
    </filename>, but at least one must be present. Each one is identified by a 
    unique initialMapStateId. The choice to activate one or another is done 
    client-side in <filename>client_conf/client.ini</filename>.
   </para>
  <para>
   Available properties and syntax for 
   layers in "initial map states" are:
   <itemizedlist>
    <listitem>
     <para>
      mapInfo.initialMapStates.initialMapStateId.layers.layerId.
      selected = true|false : if true, layer is initially selected.
     </para>
    </listitem>
    <listitem>
     <para>
       mapInfo.initialMapStates.initialMapStateId.layers.layerId.
       unfolded = true|false : if true, the layerGroup is represented as 
       an unfolded node (children layers are visible).
     </para>
    </listitem>
    <listitem>
     <para>
      mapInfo.initialMapStates.initialMapStateId.layers.layerId.
      hidden = true|false : if true, this layer and its children are not 
      shown in the layers list (but are still displayed on the map if 
      they're activated).
     </para>
    </listitem>
    <listitem>
     <para>
       mapInfo.initialMapStates.initialMapStateId.layers.layerId.
       frozen = true|false: if true, this layer (and its children as well)
       is listed in tree but without checkbox. Its selection status (defined by 
      "selected" property) thus cannot be changed.
     </para>
    </listitem>
   </itemizedlist>
   </para>
   <para>
    Example of Initial MapState : 
      <programlisting><![CDATA[mapInfo.initialMapStates.default.layers.polygon.selected = true
;mapInfo.initialMapStates.default.layers.polygon.unfolded = true 
mapInfo.initialMapStates.default.layers.polygon.hidden = true
...

mapInfo.initialMapStates.map25.layers.polygon.selected = true
mapInfo.initialMapStates.map25.layers.polygon.unfolded = true]]></programlisting>
   </para>
  </sect3>
  </sect2>
  </sect1>

 <sect1 id="user.config.plugins"> 
  <title>Ini for plugins</title>
  <para>
   Blabla Blabla Blabla Blabla Blabla Blabla Blabla 
   Blabla Blabla Blabla Blabla Blabla Blabla Blabla 
   Blabla Blabla Blabla Blabla Blabla Blabla Blabla 
   Blabla Blabla Blabla Blabla Blabla Blabla Blabla 
  </para>
 </sect1>

 <sect1 id="user.config.cache"> 
  <title>Caches configuration</title>
  <para>
   Blabla Blabla Blabla Blabla Blabla Blabla Blabla 
   Blabla Blabla Blabla Blabla Blabla Blabla Blabla 
   Blabla Blabla Blabla Blabla Blabla Blabla Blabla 
   Blabla Blabla Blabla Blabla Blabla Blabla Blabla 
  </para>
 </sect1>

</chapter>
